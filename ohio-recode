local Load = require(game:GetService("ReplicatedStorage").devv).load
local Signal = require(game:GetService("ReplicatedStorage").devv.client.Helpers.remotes.Signal)
local v3item = game:GetService("ReplicatedStorage").devv.client.Objects.v3item
local v4item = require(v3item)
local melee = Load('v3item').melee
local player = game:GetService("Players").LocalPlayer
local character = player.Character or player.CharacterAdded:Wait() 
local v3Inventory = require(v3item.modules.inventory)
local BaseItem = require(v3item.bin.baseItem)
local SafeZone = game:GetService("Workspace").SecretEggSpawns.SecretEgg3.CFrame

local Items = v3Inventory.items
local Fists

function InitFists()
    for _, item in pairs(Items) do
        if item.name == 'Fists' then
            Fists = item 
            break
        end
    end
end
function CollectMoney(rootPart)
    local Cash = workspace.Game.Entities.CashBundle
    local collected = {}
    
    for _, Dollar in pairs(Cash:GetChildren()) do
        if Dollar and Dollar.PrimaryPart then
            local dist = (Dollar.PrimaryPart.Position - rootPart.Position).Magnitude
            if dist <= 20 then 
                table.insert(collected, Dollar)
            end
        end
    end
    
    for _, Dollar in ipairs(collected) do
        if Dollar and Dollar.PrimaryPart then
            rootPart.CFrame = Dollar.PrimaryPart.CFrame
            wait(0.5) 
        end
    end
end
function Process(IsSafeZone, Params)
    if Fists and character then
        local humanoid = character:FindFirstChild("Humanoid")
        local rootPart = character:FindFirstChild("HumanoidRootPart")
        local atms = workspace.Game.Props.ATM
        local registers = workspace.Game.Props.CashRegister
        if humanoid and rootPart and humanoid.Health >= 100 then
            for _, atm in pairs(atms:GetChildren()) do
                if Params.ATM then
                    local screen = atm:FindFirstChild("Screen")
                    local atmPrimary = atm.PrimaryPart
                    
                    if screen and atmPrimary then
                        atmPrimary.CanCollide = false
                        
                        if screen.Color ~= Color3.fromRGB(255, 0, 0) then
                            local atmLook = atmPrimary.CFrame.LookVector
                            local atmRight = atmPrimary.CFrame.RightVector
                            local frontPosition = atmPrimary.Position - (atmLook * 3)
                            local lookAtCFrame = CFrame.new(frontPosition, atmPrimary.Position)
                            local cam = workspace.CurrentCamera
                            
                            repeat
                                cam.CFrame = CFrame.new(cam.CFrame.Position, atmPrimary.Position)
                            
                                rootPart.CFrame = lookAtCFrame
                                rootPart.CFrame = atmPrimary.CFrame
                                
                                local _, Equipped = v4item.GetEquipped(player)
                                if not Equipped then
                                    BaseItem.SetEquipped(Fists, true, false, true)
                                    wait(0.5) 
                                end
                                
                                task.wait(0.1)
                                melee.meleeHitreg(Fists, "meleepunch")
                                melee.onMeleeHit(player, "meleepunch")
                            until not screen or screen.Color == Color3.fromRGB(255, 0, 0) or humanoid.Health < 100
                            
                            if screen.Color == Color3.fromRGB(255, 0, 0) then
                                CollectMoney(rootPart)
                                task.wait(0.5)
                            end
                        end
                    end 
                end
                if humanoid.Health < 100 then
                    break
                end
            end
            for _, register in pairs(registers:GetChildren()) do
                pcall(function()
                    if Params.Register and register.CashDrawer then
                        local weld = register.CashDrawer.WeldConstraint
                        local atmPrimary = register.PrimaryPart
                        
                        if weld and atmPrimary then
                            atmPrimary.CanCollide = false
                            
                            if weld.Enabled then
                                local atmLook = atmPrimary.CFrame.LookVector
                                local atmRight = atmPrimary.CFrame.RightVector
                                local frontPosition = atmPrimary.Position - (atmLook * 3)
                                local lookAtCFrame = CFrame.new(frontPosition, atmPrimary.Position)
                                local cam = workspace.CurrentCamera
                                
                                repeat
                                    cam.CFrame = CFrame.new(cam.CFrame.Position, atmPrimary.Position)
                                
                                    rootPart.CFrame = lookAtCFrame
                                    rootPart.CFrame = atmPrimary.CFrame
                                    
                                    local _, Equipped = v4item.GetEquipped(player)
                                    if not Equipped then
                                        BaseItem.SetEquipped(Fists, true, false, true)
                                        wait(0.5) 
                                    end
                                
                                    task.wait(0.1)
                                    melee.meleeHitreg(Fists, "meleepunch")
                                    melee.onMeleeHit(player, "meleepunch")
                                until not weld or weld.Enabled == false or humanoid.Health < 100
                                
                                if weld.Enabled == false then
                                    task.wait(1)
                                    CollectMoney(rootPart)
                                    task.wait(0.5)
                                end
                            end
                        end 
                    end
                end)
                if humanoid.Health < 100 then
                    break
                end
            end
            if IsSafeZone then
                rootPart.CFrame = SafeZone 
            end
        end
    end 
end

local ReGui = loadstring(game:HttpGet('https://raw.githubusercontent.com/depthso/Dear-ReGui/refs/heads/main/ReGui.lua'))()
local PrefabsId = 'rbxassetid://71968920594655'
ReGui:Init({
	Prefabs = game:GetService("InsertService"):LoadLocalAsset(PrefabsId)
})
game:GetService("InsertService"):LoadLocalAsset(PrefabsId).Parent = workspace
local Window = ReGui:TabsWindow({
	Title = "Ohio killer ReCode | v1.0",
	Size = UDim2.new(0, 350, 0, 350),
	Position = UDim2.new(0.5, 0, 0, 70)
})

local FarmTab = Window:CreateTab({Name = 'Farm'})

FarmTab:Label({
    Text = "Working method to farm money"
}) 
FarmTab:Separator()

local Farm = false
local FarmSafeEnabled = true
local FarmTypes = {
    ATM = false,
    Register = false,
}

local VerticalRow = FarmTab:Indent({Offset=10}):Row()
VerticalRow:Checkbox({
	Value = false,
	Label = "ATMs?",
	Callback = function(self, Value: boolean)
		FarmTypes.ATM = Value
	end
})
VerticalRow:Checkbox({
	Value = false,
	Label = "Registers?",
	Callback = function(self, Value: boolean)
		FarmTypes.Register = Value
	end
})
FarmTab:Separator()

FarmTab:Checkbox({
	Value = FarmSafeEnabled,
	Label = "Safe zone",
	Callback = function(self, Value: boolean)
		FarmSafeEnabled = Value
	end
})

FarmTab:Checkbox({
	Value = Farm,
	Label = "Enabled",
	Callback = function(self, Value: boolean)
		Farm = Value
	end
})


InitFists()

task.spawn(function()
    while task.wait() do
        if Farm then
            Process(FarmSafeEnabled, FarmTypes) 
        end
    end
end)

FarmTab:Label({
    Text = "Working method to farm money"
}) 
FarmTab:Separator({Text = 'NOTE: To disable press ESC and disable, \nSometimes may bug atms'})
